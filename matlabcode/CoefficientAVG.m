% Script to average coefficeients from repeat tests for polynomial relationship between applied force and digital value.
% Created by Daniel Darvill 23/01/2016 

%falling Test1
p1(1) =   1.325e-11 ; %(1.278e-11, 1.372e-11) 
p2(1) =  -1.643e-08 ; %(-1.712e-08, -1.575e-08)
p3(1) =   7.342e-06 ; %(6.987e-06, 7.697e-06)
p4(1) =   -0.001299 ; %(-0.001375, -0.001223)
p5(1) =     0.09608 ; %(0.09037, 0.1018)
p6(1) =      0.0989 ; %(0.0495, 0.1483)
       
%rising Test1      
p1(2) =   6.003e-12 ; %(5.854e-12, 6.152e-12)
p2(2) =  -7.307e-09 ; %(-7.521e-09, -7.092e-09)
p3(2) =   3.332e-06 ; %(3.222e-06, 3.441e-06)
p4(2) =  -0.0005741 ; %(-0.0005972, -0.0005509)
p5(2) =     0.06598 ; %(0.06423, 0.06774)
p6(2) =      0.2532 ; %(0.2326, 0.2738)

%falling Test2
p1(3) =   8.461e-12 ; %(6.93e-12, 9.992e-12)
p2(3) =  -9.559e-09 ; %(-1.182e-08, -7.302e-09)
p3(3) =   4.001e-06 ; %(2.822e-06, 5.179e-06)
p4(3) =   -0.000663 ; %(-0.0009183, -0.0004076)
p5(3) =     0.05317 ; %(0.03358, 0.07276)
p6(3) =      0.1706 ; %(-0.02913, 0.3704)

%rising Test2  
p1(4) =   4.277e-12 ; %(4.109e-12, 4.446e-12)
p2(4) =  -5.231e-09 ; %(-5.453e-09, -5.01e-09)
p3(4) =   2.502e-06 ; %(2.399e-06, 2.604e-06)
p4(4) =  -0.0004622 ; %(-0.0004819, -0.0004425)
p5(4) =     0.07119 ; %(0.06984, 0.07253)
p6(4) =      0.2583 ; %(0.2452, 0.2713)

p1_avg = mean(p1);
p2_avg = mean(p2);
p3_avg = mean(p3);
p4_avg = mean(p4);
p5_avg = mean(p5);
p6_avg = mean(p6);

lim = [1 600] ;

figure 
hold on
fplot(@(x) p1_avg*x^5 + p2_avg*x^4 + p3_avg*x^3 + p4_avg*x^2 + p5_avg*x + p6_avg, lim,'r')
fplot(@(x) p1(1)*x^5 + p2(1)*x^4 + p3(1)*x^3 + p4(1)*x^2 + p5(1)*x + p6(1), lim,'--b') 
fplot(@(x) p1(2)*x^5 + p2(2)*x^4 + p3(2)*x^3 + p4(2)*x^2 + p5(2)*x + p6(2), lim,'--m') 
fplot(@(x) p1(3)*x^5 + p2(3)*x^4 + p3(3)*x^3 + p4(3)*x^2 + p5(3)*x + p6(3), lim,'--k') 
fplot(@(x) p1(4)*x^5 + p2(4)*x^4 + p3(4)*x^3 + p4(4)*x^2 + p5(4)*x + p6(4), lim,'--g') 
legend('avg','1','2','3','4') ;

ylabel('Force (N)')
xlabel('Digital Value')
title('Coefficient Averaging')




